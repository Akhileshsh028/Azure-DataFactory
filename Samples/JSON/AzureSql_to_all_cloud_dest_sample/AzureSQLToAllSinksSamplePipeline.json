{
    "name": "AzureSQLToAllSinksSamplePipeline",
    "properties":
    {
		"start": "2014-06-01T18:00:00",
		"end": "2014-06-01T19:00:00",
		"description" : "AzureSQLToAllSinksSamplePipeline",
		"activities":
		[
			
			{
				"name": "AzureSQLtoBlob",
				"description": "AzureSQLtoBlob", 
				"type": "CopyActivity",
				"inputs":  [ { "name": "AzureSQLSource"  } ],
				"outputs":  [ { "name": "AzureBlobDest" } ],
				"linkedServiceName": "HDInsightLinkedService",
				"transformation":
				{
					"source":
					{                               
						"type": "SqlSource",
						"SqlReaderQuery":  "$$Text.Format('select * from Traces where Timestamp >= \\'{0:yyyy-MM-dd}\\' AND Timestamp < \\'{1:yyyy-MM-dd}\\'', SliceStart, SliceEnd)"
					},
					"sink":
					{
						"type": "BlobSink",
						"writeBatchSize": 1000000,
						"writeBatchTimeout": "01:00:00"
					}
				},
				"policy":
				{
					"concurrency": 1,
					"executionPriorityOrder": "OldestFirst",
					"retry": 0,
					"timeout": "01:00:00"
				}
			},
			{
				"name": "AzureSQLtoTable",
				"description": "AzureSQLtoTable", 
				"type": "CopyActivity",
				"inputs":  [ { "name": "AzureSQLSource"  } ],
				"outputs":  [ { "name": "AzureTableDest" } ],
				"linkedServiceName": "HDInsightLinkedService",
				"transformation":
				{
					"source":
					{                               
						"type": "SqlSource",
						"SqlReaderQuery":  "$$Text.Format('select * from Traces where Timestamp >= \\'{0:yyyy-MM-dd}\\' AND Timestamp < \\'{1:yyyy-MM-dd}\\'', SliceStart, SliceEnd)"
					},
					"sink":
					{
						"type": "AzureTableSink",
						"writeBatchSize": 1000000,
						"writeBatchTimeout": "01:00:00",
						"azureTableRetryIntervalInSec": 60,
						"azureTableRetryTimes": 5
					}
				},
				"policy":
				{
					"concurrency": 1,
					"executionPriorityOrder": "OldestFirst",
					"retry": 0,
					"timeout": "01:00:00"
				}
			},
			{
				"name": "AzureSQLtoSQL",
				"description": "AzureSQLtoSQL", 
				"type": "CopyActivity",
				"inputs":  [ { "name": "AzureSQLSource"  } ],
				"outputs":  [ { "name": "AzureSqlDest" } ],
				"linkedServiceName": "HDInsightLinkedService",
				"transformation":
				{
				"source":
					{                               
						"type": "SqlSource",
						"SqlReaderQuery":  "$$Text.Format('select * from Traces where Timestamp >= \\'{0:yyyy-MM-dd}\\' AND Timestamp < \\'{1:yyyy-MM-dd}\\'', SliceStart, SliceEnd)"
					},
					"sink":
					{
						"type": "SqlSink",
						"writeBatchSize": 99,
						"writeBatchTimeout": "01:00:00"
					}
				},
				"policy":
				{
					"concurrency": 1,
					"executionPriorityOrder": "OldestFirst",
					"retry": 0,
					"timeout": "01:00:00"
				}
			}
		]
    }
}